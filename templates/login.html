{% extends "base.html" %}

{% block title %}Log In{% endblock %}

{% block body %}


<h2>Please log in to access your tracker.</h2>
<form action="/login" method="POST" id="login-form">
    <label>
        Username: <input type="username" name="username" id="username" required><br>
    </label>
    <label>
        Password: <input type="password" name="password" id="password" required><br>
    </label>
    <input type="submit" value="Log In">
</form>

<script>

function validateLogin(event) {
    event.preventDefault();
    debugger

    const loginInputs = { 
        'username': $("#username").val(),
        'password': $("#password").val()
    };

    $.post("/validate-login", loginInputs, function (response) {
        if (response) {
            alert(response);
        } else {
            $("#login-form").submit();
        }
    });
}
    
$('#login-form input[type="submit"]').on('click', validateLogin);

</script>
{% endblock %}